<div
    class="min-h-[calc(100vh-4rem)] flex items-center justify-center p-6 bg-[url('/gifts-bg.jpg')] bg-cover bg-center bg-no-repeat">
    <div
        class="w-full max-w-md rounded-2xl border border-border bg-card bg-white/80 dark:bg-neutral-900/70 backdrop-blur-sm p-6 shadow-sm">
        <div class="mb-6 text-center">
            <h2 class="mt-3 text-2xl font-semibold">Create Account</h2>
            <p class="mt-1 text-sm text-muted">Join MyGifts to start your wishlist.</p>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
            <div>
                <label for="email" class="block text-sm font-medium mb-1">Email</label>
                <input id="email" type="email" formControlName="email" required
                    class="block w-full rounded-lg border border-border bg-bg px-3 py-2 text-sm outline-none transition focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                <div class="mt-1 text-xs text-red-500"
                    *ngIf="form.controls.email.touched && form.controls.email.invalid">
                    @if (form.get('email')?.hasError('required')) { <span>Email is required.</span> }
                    @if (form.get('email')?.hasError('email')) { <span>Please enter a valid email.</span> }
                </div>
            </div>

            <div>
                <label for="firstName" class="block text-sm font-medium mb-1">First Name</label>
                <input id="firstName" type="text" formControlName="firstName" required
                    class="block w-full rounded-lg border border-border bg-bg px-3 py-2 text-sm outline-none transition focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                <div class="mt-1 text-xs text-red-500"
                    *ngIf="form.controls.firstName.touched && form.controls.firstName.invalid">
                    <span>First name is required.</span>
                </div>
            </div>

            <div>
                <label for="lastName" class="block text-sm font-medium mb-1">Last Name</label>
                <input id="lastName" type="text" formControlName="lastName" required
                    class="block w-full rounded-lg border border-border bg-bg px-3 py-2 text-sm outline-none transition focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                <div class="mt-1 text-xs text-red-500"
                    *ngIf="form.controls.lastName.touched && form.controls.lastName.invalid">
                    <span>Last name is required.</span>
                </div>
            </div>

            <div>
                <label for="password" class="block text-sm font-medium mb-1">Password</label>
                <input id="password" type="password" formControlName="password" required
                    class="block w-full rounded-lg border border-border bg-bg px-3 py-2 text-sm outline-none transition focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                <div class="mt-1 text-xs text-red-500"
                    *ngIf="form.controls.password.touched && form.controls.password.invalid">
                    @if (form.get('password')?.hasError('required')) { <span>Password is required.</span> }
                    @if (form.get('password')?.hasError('minlength')) { <span>Password must be at least 8
                        characters.</span> }
                </div>
            </div>

            <div>
                <label for="confirmPassword" class="block text-sm font-medium mb-1">Confirm Password</label>
                <input id="confirmPassword" type="password" formControlName="confirmPassword" required
                    class="block w-full rounded-lg border border-border bg-bg px-3 py-2 text-sm outline-none transition focus:ring-2 focus:ring-primary/30 focus:border-primary" />
                <div class="mt-1 text-xs text-red-500"
                    *ngIf="confirmPasswordControl?.touched && confirmPasswordControl?.invalid">
                    @if (confirmPasswordControl?.hasError('required')) { <span>Please confirm your password.</span> }
                    @if (confirmPasswordControl?.hasError('passwordMismatch')) { <span>Passwords do not match.</span> }
                </div>
            </div>

            <button type="submit" [disabled]="form.invalid || loading"
                class="inline-flex w-full items-center justify-center rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition hover:bg-primary/90 disabled:opacity-60 disabled:cursor-not-allowed">
                {{ loading ? 'Creating accountâ€¦' : 'Create Account' }}
            </button>

            <button type="button" (click)="navigateToLogin()" [disabled]="loading"
                class="inline-flex w-full items-center justify-center rounded-lg border border-border bg-bg px-4 py-2 text-sm font-medium transition hover:bg-card disabled:opacity-60 disabled:cursor-not-allowed">
                Already have an account? Sign in
            </button>

            @if (errorMessage) { <p class="text-sm text-red-500">{{ errorMessage }}</p> }
        </form>
    </div>
</div>